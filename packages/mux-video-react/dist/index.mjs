import{useEffect as V,useRef as k}from"react";var b=(...o)=>{let n=k(null);return V(()=>{o.forEach(a=>{!a||(typeof a=="function"?a(n.current):a.current=n.current)})},[o]),n};import T,{useEffect as i,useRef as R,useState as M}from"react";import e from"prop-types";import{allMediaTypes as j,initialize as w,StreamTypes as H,PlaybackTypes as I,toMuxVideoURL as P,generatePlayerInitTime as N}from"@mux/playback-core";var L=()=>{try{return"0.7.2"}catch{}return"UNKNOWN"},S=L(),m=()=>S;var h=m(),A="mux-video-react",g=T.forwardRef((o,n)=>{var d;let{envKey:a,debug:D,beaconCollectionDomain:K,playbackId:s,preferPlayback:U,type:W,streamType:_,startTime:z,src:c,children:v,autoPlay:u,preload:f,videoQuality:p=2,...x}=o,[C]=M(N()),[y,E]=M((d=P(s))!=null?d:c),r=R(void 0),O=R(null),l=b(O,n);return i(()=>{var t;E((t=P(s))!=null?t:c)},[c,s]),i(()=>{r&&r.current&&r.current.engine&&r.current.engine.currentLevel&&(r.current.engine.currentLevel=p)},[p]),i(()=>{let t={...o,src:y,playerInitTime:C,playerSoftwareName:A,playerSoftwareVersion:h,autoplay:u};l.current&&(r.current=w(t,l.current,r.current))},[y]),i(()=>{var t;(t=r.current)==null||t.setAutoplay(u)},[u]),i(()=>{var t;(t=r.current)==null||t.setPreload(f)},[f]),T.createElement("video",{ref:l,...x},v)});g.propTypes={envKey:e.string,debug:e.bool,disableCookies:e.bool,metadata:e.any,beaconCollectionDomain:e.string,playbackId:e.string,playerInitTime:e.number,preferPlayback:e.oneOf(Object.values(I)),type:e.oneOf(j),streamType:e.oneOf(Object.values(H)),startTime:e.number};var ee=g;export{ee as default};
//# sourceMappingURL=index.mjs.map
