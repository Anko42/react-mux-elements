"use strict";var de=Object.defineProperty;var Ze=Object.getOwnPropertyDescriptor;var Qe=Object.getOwnPropertyNames;var et=Object.prototype.hasOwnProperty;var tt=(i,t,e)=>t in i?de(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var st=(i,t)=>{for(var e in t)de(i,e,{get:t[e],enumerable:!0})},rt=(i,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Qe(t))!et.call(i,o)&&o!==e&&de(i,o,{get:()=>t[o],enumerable:!(n=Ze(t,o))||n.enumerable});return i};var it=i=>rt(de({},"__esModule",{value:!0}),i);var W=(i,t,e)=>(tt(i,typeof t!="symbol"?t+"":t,e),e),ge=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)};var r=(i,t,e)=>(ge(i,t,"read from private field"),e?e.call(i):t.get(i)),u=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)},l=(i,t,e,n)=>(ge(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e);var h=(i,t,e)=>(ge(i,t,"access private method"),e);var Et={};st(Et,{Attributes:()=>c,MediaError:()=>E.MediaError,VideoEvents:()=>ke,default:()=>pt});module.exports=it(Et);var U=class{addEventListener(){}removeEventListener(){}dispatchEvent(t){return!0}};if(typeof DocumentFragment=="undefined"){class i extends U{}globalThis.DocumentFragment=i}var $=class extends U{},be=class extends U{},at={get(i){},define(i,t,e){},upgrade(i){},whenDefined(i){return Promise.resolve($)}},z,Ae=class{constructor(t,e={}){u(this,z,void 0);l(this,z,e==null?void 0:e.detail)}get detail(){return r(this,z)}initCustomEvent(){}};z=new WeakMap;function nt(i,t){return new $}var Fe={document:{createElement:nt},DocumentFragment,customElements:at,CustomEvent:Ae,EventTarget:U,HTMLElement:$,HTMLVideoElement:be},Ge=typeof window=="undefined"||typeof globalThis.customElements=="undefined",C=Ge?Fe:globalThis,Te=Ge?Fe.document:globalThis.document;var E=require("@mux/playback-core");var ot=()=>{try{return"0.12.0"}catch{}return"UNKNOWN"},ct=ot(),Ke=()=>ct;var Pe=class extends Set{add(t){super.add(new WeakRef(t))}forEach(t){super.forEach(e=>{let n=e.deref();n&&t(n)})}},ut=i=>{var t,e,n,o,f,He,p,he,T,O,x,me,Y,fe,ae,je,ne,Ve,K,Se,H,b,k,R,I,L,_,J,oe,qe,j,ve,ce,We,V,Ce,ue,$e,q,Oe;return t=class extends i{constructor(){super();u(this,_);u(this,oe);u(this,j);u(this,ce);u(this,V);u(this,ue);u(this,q);W(this,"castEnabled",!1);u(this,H,{paused:!1});u(this,b,void 0);u(this,k,{});u(this,R,void 0);u(this,I,void 0);u(this,L,void 0);t.instances.add(this),h(this,V,Ce).call(this)}static get castElement(){return r(t,e)}static get castEnabled(){return r(t,n)}static get castState(){var s;return(s=r(t,T,O))==null?void 0:s.getCastState()}static async exitCast(){try{await r(t,T,O).endCurrentSession(!0)}catch(a){console.error(a);return}}get castPlayer(){if(t.castElement===this)return r(this,b)}attributeChangedCallback(s){if(!!this.castPlayer)switch(s){case"cast-stream-type":case"cast-src":this.load();break}}async requestCast(s={}){var a;h(a=t,K,Se).call(a,s),l(t,e,this),Object.entries(r(this,k)).forEach(([d,y])=>{r(this,b).controller.addEventListener(d,y)});try{await r(t,T,O).requestSession()}catch{l(t,e,void 0);return}r(this,H).paused=super.paused,super.pause(),this.muted=super.muted;try{await this.load()}catch(d){console.error(d)}}async load(){var v,w;if(!this.castPlayer)return super.load();let s=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType),a=[...this.querySelectorAll("track")].filter(({kind:P,src:A})=>A&&(P==="subtitles"||P==="captions")),d=[],y=0;a.length&&(s.tracks=a.map(P=>{let A=++y;d.length===0&&P.track.mode==="showing"&&d.push(A);let N=new chrome.cast.media.Track(A,chrome.cast.media.TrackType.TEXT);return N.trackContentId=P.src,N.trackContentType="text/vtt",N.subtype=P.kind==="captions"?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,N.name=P.label,N.language=P.srclang,N})),this.castStreamType==="live"?s.streamType=chrome.cast.media.StreamType.LIVE:s.streamType=chrome.cast.media.StreamType.BUFFERED,s.metadata=new chrome.cast.media.GenericMediaMetadata,s.metadata.title=this.title,s.metadata.images=[{url:this.poster}];let g=new chrome.cast.media.LoadRequest(s);g.currentTime=(v=super.currentTime)!=null?v:0,g.autoplay=!r(this,H).paused,g.activeTrackIds=d,await((w=r(t,x,me))==null?void 0:w.loadMedia(g)),this.dispatchEvent(new Event("volumechange"))}play(){var s;if(this.castPlayer){this.castPlayer.isPaused&&((s=this.castPlayer.controller)==null||s.playOrPause());return}return super.play()}pause(){var s;if(this.castPlayer){this.castPlayer.isPaused||(s=this.castPlayer.controller)==null||s.playOrPause();return}super.pause()}get castSrc(){var s,a,d;return(d=(a=this.getAttribute("cast-src"))!=null?a:(s=this.querySelector("source"))==null?void 0:s.src)!=null?d:this.currentSrc}set castSrc(s){this.castSrc!=s&&this.setAttribute("cast-src",`${s}`)}get castContentType(){var s;return(s=this.getAttribute("cast-content-type"))!=null?s:void 0}set castContentType(s){this.setAttribute("cast-content-type",`${s}`)}get castStreamType(){var s;return(s=this.getAttribute("cast-stream-type"))!=null?s:void 0}set castStreamType(s){this.setAttribute("cast-stream-type",`${s}`)}get readyState(){if(this.castPlayer)switch(this.castPlayer.playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return this.castPlayer?this.castPlayer.isPaused:super.paused}get muted(){var s;return this.castPlayer?(s=this.castPlayer)==null?void 0:s.isMuted:super.muted}set muted(s){var a;if(this.castPlayer){(s&&!this.castPlayer.isMuted||!s&&this.castPlayer.isMuted)&&((a=this.castPlayer.controller)==null||a.muteOrUnmute());return}super.muted=s}get volume(){var s,a;return this.castPlayer?(a=(s=this.castPlayer)==null?void 0:s.volumeLevel)!=null?a:1:super.volume}set volume(s){var a;if(this.castPlayer){this.castPlayer.volumeLevel=s,(a=this.castPlayer.controller)==null||a.setVolumeLevel();return}super.volume=s}get duration(){var s,a;return this.castPlayer&&r(this,_,J)?(a=(s=this.castPlayer)==null?void 0:s.duration)!=null?a:NaN:super.duration}get currentTime(){var s,a;return this.castPlayer&&r(this,_,J)?(a=(s=this.castPlayer)==null?void 0:s.currentTime)!=null?a:0:super.currentTime}set currentTime(s){var a;if(this.castPlayer){this.castPlayer.currentTime=s,(a=this.castPlayer.controller)==null||a.seek();return}super.currentTime=s}get onentercast(){return r(this,R)}set onentercast(s){r(this,R)&&(this.removeEventListener("entercast",r(this,R)),l(this,R,null)),typeof s=="function"&&(l(this,R,s),this.addEventListener("entercast",s))}get onleavecast(){return r(this,I)}set onleavecast(s){r(this,I)&&(this.removeEventListener("leavecast",r(this,I)),l(this,I,null)),typeof s=="function"&&(l(this,I,s),this.addEventListener("leavecast",s))}get oncastchange(){return r(this,L)}set oncastchange(s){r(this,L)&&(this.removeEventListener("castchange",r(this,L)),l(this,L,null)),typeof s=="function"&&(l(this,L,s),this.addEventListener("castchange",s))}},e=new WeakMap,n=new WeakMap,o=new WeakMap,f=new WeakSet,He=function(){return typeof chrome!="undefined"&&chrome.cast&&chrome.cast.isAvailable},p=new WeakSet,he=function(){return typeof cast!="undefined"&&cast.framework},T=new WeakSet,O=function(){if(r(t,p,he))return cast.framework.CastContext.getInstance()},x=new WeakSet,me=function(){var s;return(s=r(t,T,O))==null?void 0:s.getCurrentSession()},Y=new WeakSet,fe=function(){var s;return(s=r(t,x,me))==null?void 0:s.getSessionObj().media[0]},ae=new WeakSet,je=function(s){return new Promise((a,d)=>{r(t,Y,fe).editTracksInfo(s,a,d)})},ne=new WeakSet,Ve=function(s){return new Promise((a,d)=>{r(t,Y,fe).getStatus(s,a,d)})},K=new WeakSet,Se=function(s){return r(t,T,O).setOptions({receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0,...s})},H=new WeakMap,b=new WeakMap,k=new WeakMap,R=new WeakMap,I=new WeakMap,L=new WeakMap,_=new WeakSet,J=function(){var s;return(s=this.castPlayer)==null?void 0:s.isMediaLoaded},oe=new WeakSet,qe=function(){r(t,e)===this&&(Object.entries(r(this,k)).forEach(([s,a])=>{r(this,b).controller.removeEventListener(s,a)}),l(t,e,void 0),this.muted=r(this,b).isMuted,this.currentTime=r(this,b).savedPlayerState.currentTime,r(this,b).savedPlayerState.isPaused===!1&&this.play())},j=new WeakSet,ve=function(){this.dispatchEvent(new CustomEvent("castchange",{detail:r(t,T,O).getCastState()}))},ce=new WeakSet,We=async function(){var a,d;let{SESSION_RESUMED:s}=cast.framework.SessionState;if(r(t,T,O).getSessionState()===s&&this.castSrc===((a=r(t,Y,fe))==null?void 0:a.media.contentId)){l(t,e,this),Object.entries(r(this,k)).forEach(([y,g])=>{r(this,b).controller.addEventListener(y,g)});try{await h(d=t,ne,Ve).call(d,new chrome.cast.media.GetStatusRequest)}catch(y){console.error(y)}r(this,k)[cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED](),r(this,k)[cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}},V=new WeakSet,Ce=function(){var s;!r(t,p,he)||this.castEnabled||(this.castEnabled=!0,h(s=t,K,Se).call(s),this.textTracks.addEventListener("change",h(this,q,Oe).bind(this)),h(this,j,ve).call(this),l(this,b,new cast.framework.RemotePlayer),new cast.framework.RemotePlayerController(r(this,b)),l(this,k,{[cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED]:({value:a})=>{a===!1&&h(this,oe,qe).call(this),this.dispatchEvent(new Event(a?"entercast":"leavecast"))},[cast.framework.RemotePlayerEventType.DURATION_CHANGED]:()=>{this.dispatchEvent(new Event("durationchange"))},[cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{this.dispatchEvent(new Event("volumechange"))},[cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{this.dispatchEvent(new Event("volumechange"))},[cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{!r(this,_,J)||this.dispatchEvent(new Event("timeupdate"))},[cast.framework.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{this.dispatchEvent(new Event("resize"))},[cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{this.dispatchEvent(new Event(this.paused?"pause":"play"))},[cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{var a,d;((a=this.castPlayer)==null?void 0:a.playerState)!==chrome.cast.media.PlayerState.PAUSED&&this.dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[(d=this.castPlayer)==null?void 0:d.playerState]))},[cast.framework.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{!r(this,_,J)||(await Promise.resolve(),h(this,ue,$e).call(this))}}))},ue=new WeakSet,$e=function(){h(this,q,Oe).call(this)},q=new WeakSet,Oe=async function(){var Le,De,_e,we,Ne,xe;if(!this.castPlayer)return;let a=((De=(Le=r(this,b).mediaInfo)==null?void 0:Le.tracks)!=null?De:[]).filter(({type:m})=>m===chrome.cast.media.TrackType.TEXT),d=[...this.textTracks].filter(({kind:m})=>m==="subtitles"||m==="captions"),y=a.map(({language:m,name:le,trackId:ye})=>{var Ue;let{mode:Ye}=(Ue=d.find(Be=>Be.language===m&&Be.label===le))!=null?Ue:{};return Ye?{mode:Ye,trackId:ye}:!1}).filter(Boolean),v=y.filter(({mode:m})=>m!=="showing").map(({trackId:m})=>m),w=y.find(({mode:m})=>m==="showing"),P=(Ne=(we=(_e=r(t,x,me))==null?void 0:_e.getSessionObj().media[0])==null?void 0:we.activeTrackIds)!=null?Ne:[],A=P;if(P.length&&(A=A.filter(m=>!v.includes(m))),w!=null&&w.trackId&&(A=[...A,w.trackId]),A=[...new Set(A)],!((m,le)=>m.length===le.length&&m.every(ye=>le.includes(ye)))(P,A))try{let m=new chrome.cast.media.EditTracksInfoRequest(A);await h(xe=t,ae,je).call(xe,m)}catch(m){console.error(m)}},u(t,f),u(t,p),u(t,T),u(t,x),u(t,Y),u(t,ae),u(t,ne),u(t,K),W(t,"observedAttributes",["cast-src","cast-content-type","cast-stream-type"]),W(t,"instances",new Pe),u(t,e,void 0),u(t,n,!1),W(t,"initCast",()=>{var s;r(t,f,He)?r(t,p,he)?r(s=t,o).call(s,chrome.cast.isAvailable):customElements.whenDefined("google-cast-button").then(()=>{var a;return r(a=t,o).call(a,chrome.cast.isAvailable)}):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then(()=>{var a;return r(a=t,o).call(a,chrome.cast.isAvailable)})}}),u(t,o,s=>{if(s){l(t,n,!0);let{CAST_STATE_CHANGED:a}=cast.framework.CastContextEventType;r(t,T,O).addEventListener(a,y=>{t.instances.forEach(g=>{var v;return h(v=g,j,ve).call(v,y)})});let{SESSION_STATE_CHANGED:d}=cast.framework.CastContextEventType;r(t,T,O).addEventListener(d,y=>{t.instances.forEach(g=>{var v;return h(v=g,ce,We).call(v,y)})}),t.instances.forEach(y=>{var g;return h(g=y,V,Ce).call(g)})}}),t};if(globalThis.HTMLVideoElement&&globalThis.customElements){let i=ut(HTMLVideoElement);globalThis.customElements.get("castable-video")||(globalThis.customElements.define("castable-video",i,{extends:"video"}),globalThis.CastableVideoElement=i),i.initCast()}var ke=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","castchange","entercast","leavecast"],ze=Te.createElement("template");ze.innerHTML=`
<style>
  :host {
    display: inline-block;
    line-height: 0;
    width: auto;
    height: auto;
  }

  video {
    max-width: 100%;
    max-height: 100%;
    min-width: 100%;
    min-height: 100%;
    object-fit: var(--media-object-fit, contain);
    object-position: var(--media-object-position, 50% 50%);
  }
</style>
<video is="castable-video" part="video" crossorigin></video>
<slot></slot>
`;var X,B,pe,Z,Me,D=class extends C.HTMLElement{constructor(){super();u(this,B);u(this,Z);u(this,X,void 0);this.attachShadow({mode:"open"}),this.isConnected&&h(this,B,pe).call(this)}static get observedAttributes(){let e=[],n=f=>f.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();Object.getOwnPropertyNames(this.prototype).forEach(f=>{let S=!1;try{typeof this.prototype[f]=="function"&&(S=!0)}catch{}!S&&f!==f.toUpperCase()&&e.push(f.toLowerCase(),n(f))});let o=Object.getPrototypeOf(this).observedAttributes;return o&&(e=e.concat(o)),e}attributeChangedCallback(e,n,o){h(this,B,pe).call(this),h(this,Z,Me).call(this,e,n,o)}connectedCallback(){h(this,B,pe).call(this)}};X=new WeakMap,B=new WeakSet,pe=function(){if(r(this,X))return;l(this,X,!0),this.shadowRoot.append(ze.content.cloneNode(!0)),this.nativeEl=this.shadowRoot.querySelector("video"),ke.forEach(n=>{this.nativeEl.addEventListener(n,o=>{this.dispatchEvent(new CustomEvent(o.type,{detail:o.detail}))})});let e=this.shadowRoot.querySelector("slot");e.addEventListener("slotchange",()=>{e.assignedElements().forEach(n=>{!["track","source"].includes(n.localName)||this.nativeEl.append(n)})}),Array.prototype.forEach.call(this.attributes,n=>{h(this,Z,Me).call(this,n.name,null,n.value)}),this.nativeEl.defaultMuted&&(this.nativeEl.muted=!0)},Z=new WeakSet,Me=function(e,n,o){let f=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),S=dt(f,e),p=Object.getPrototypeOf(this.constructor).toString().indexOf("function HTMLElement")===0;S&&!p?typeof this[S]=="boolean"?o===null?this[S]=!1:this[S]=!0:this[S]=o:o===null?this.nativeEl.removeAttribute(e):["id","class"].indexOf(e)===-1&&this.nativeEl.setAttribute(e,o)};var Je=[],Xe=Te.createElement("video",{is:"castable-video"}),lt=["webkitDisplayingFullscreen","webkitSupportsFullscreen"];for(let i=Object.getPrototypeOf(Xe);i&&i!==C.HTMLElement.prototype;i=Object.getPrototypeOf(i))Object.getOwnPropertyNames(i).forEach(t=>{lt.indexOf(t)===-1&&Je.push(t)});Je.forEach(i=>{if(i in D.prototype)return;if(typeof Xe[i]=="function")D.prototype[i]=function(){return this.nativeEl[i].apply(this.nativeEl,arguments)};else{let e={get(){return this.nativeEl[i]}};i!==i.toUpperCase()&&(e.set=function(n){this.nativeEl[i]=n}),Object.defineProperty(D.prototype,i,e)}});function dt(i,t){let e=null;return i.forEach(n=>{n.toLowerCase()==t.toLowerCase()&&(e=n)}),e}C.customElements.get("custom-video")||(C.customElements.define("custom-video",D),C.CustomVideoElement=D);var Re=D;var c={ENV_KEY:"env-key",DEBUG:"debug",PLAYBACK_ID:"playback-id",METADATA_URL:"metadata-url",PREFER_PLAYBACK:"prefer-playback",PLAYER_SOFTWARE_VERSION:"player-software-version",PLAYER_SOFTWARE_NAME:"player-software-name",BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DISABLE_COOKIES:"disable-cookies",TYPE:"type",STREAM_TYPE:"stream-type",START_TIME:"start-time",PREFER_CMCD:"prefer-cmcd"},ht=Object.values(c),mt=Ke(),ft="mux-video",M,F,ee,G,te,se,re,ie,Ie,Q=class extends Re{constructor(){super();u(this,ie);u(this,M,void 0);u(this,F,void 0);u(this,ee,void 0);u(this,G,{});u(this,te,void 0);u(this,se,void 0);u(this,re,void 0);l(this,ee,(0,E.generatePlayerInitTime)())}static get observedAttributes(){var e;return[...ht,...(e=Re.observedAttributes)!=null?e:[]]}get preferCmcd(){var e;return(e=this.getAttribute(c.PREFER_CMCD))!=null?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?E.CmcdTypeValues.includes(e)?this.setAttribute(c.PREFER_CMCD,e):console.warn(`Invalid value for preferCmcd. Must be one of ${E.CmcdTypeValues.join()}`):this.removeAttribute(c.PREFER_CMCD))}get playerInitTime(){return r(this,ee)}get playerSoftwareName(){var e;return(e=r(this,se))!=null?e:ft}set playerSoftwareName(e){l(this,se,e)}get playerSoftwareVersion(){var e;return(e=r(this,te))!=null?e:mt}set playerSoftwareVersion(e){l(this,te,e)}get _hls(){var e;return(e=r(this,M))==null?void 0:e.engine}get mux(){return this.nativeEl.mux}get error(){var e;return(e=(0,E.getError)(this.nativeEl))!=null?e:null}get errorTranslator(){return r(this,re)}set errorTranslator(e){l(this,re,e)}get src(){return this.getAttribute("src")}set src(e){e!==this.src&&(e==null?this.removeAttribute("src"):this.setAttribute("src",e))}get type(){var e;return(e=this.getAttribute(c.TYPE))!=null?e:void 0}set type(e){e!==this.type&&(e?this.setAttribute(c.TYPE,e):this.removeAttribute(c.TYPE))}get autoplay(){let e=this.getAttribute("autoplay");return e===null?!1:e===""?!0:e}set autoplay(e){let n=this.autoplay;e!==n&&(e?this.setAttribute("autoplay",typeof e=="string"?e:""):this.removeAttribute("autoplay"))}get preload(){let e=this.getAttribute("preload");return e===""?"auto":["none","metadata","auto"].includes(e)?e:super.preload}set preload(e){e!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(e)?this.setAttribute("preload",e):this.removeAttribute("preload"))}get debug(){return this.getAttribute(c.DEBUG)!=null}set debug(e){e!==this.debug&&(e?this.setAttribute(c.DEBUG,""):this.removeAttribute(c.DEBUG))}get disableCookies(){return this.hasAttribute(c.DISABLE_COOKIES)}set disableCookies(e){e!==this.disableCookies&&(e?this.setAttribute(c.DISABLE_COOKIES,""):this.removeAttribute(c.DISABLE_COOKIES))}get startTime(){let e=this.getAttribute(c.START_TIME);if(e==null)return;let n=+e;return Number.isNaN(n)?void 0:n}set startTime(e){e!==this.startTime&&(e==null?this.removeAttribute(c.START_TIME):this.setAttribute(c.START_TIME,`${e}`))}get playbackId(){var e;return(e=this.getAttribute(c.PLAYBACK_ID))!=null?e:void 0}set playbackId(e){e!==this.playbackId&&(e?this.setAttribute(c.PLAYBACK_ID,e):this.removeAttribute(c.PLAYBACK_ID))}get customDomain(){var e;return(e=this.getAttribute(c.CUSTOM_DOMAIN))!=null?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(c.CUSTOM_DOMAIN,e):this.removeAttribute(c.CUSTOM_DOMAIN))}get envKey(){var e;return(e=this.getAttribute(c.ENV_KEY))!=null?e:void 0}set envKey(e){e!==this.envKey&&(e?this.setAttribute(c.ENV_KEY,e):this.removeAttribute(c.ENV_KEY))}get beaconCollectionDomain(){var e;return(e=this.getAttribute(c.BEACON_COLLECTION_DOMAIN))!=null?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(c.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(c.BEACON_COLLECTION_DOMAIN))}get streamType(){var e;return(e=this.getAttribute(c.STREAM_TYPE))!=null?e:void 0}set streamType(e){e!==this.streamType&&(e?this.setAttribute(c.STREAM_TYPE,e):this.removeAttribute(c.STREAM_TYPE))}get preferPlayback(){let e=this.getAttribute(c.PREFER_PLAYBACK);if(e===E.PlaybackTypes.MSE||e===E.PlaybackTypes.NATIVE)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===E.PlaybackTypes.MSE||e===E.PlaybackTypes.NATIVE?this.setAttribute(c.PREFER_PLAYBACK,e):this.removeAttribute(c.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter(n=>n.startsWith("metadata-")&&![c.METADATA_URL].includes(n)).reduce((n,o)=>{let f=this.getAttribute(o);return f!=null&&(n[o.replace(/^metadata-/,"").replace(/-/g,"_")]=f),n},{}),...r(this,G)}}set metadata(e){l(this,G,e!=null?e:{}),this.mux&&this.mux.emit("hb",r(this,G))}load(){l(this,M,(0,E.initialize)(this,this.nativeEl,r(this,M)))}unload(){(0,E.teardown)(this.nativeEl,r(this,M)),l(this,M,void 0)}attributeChangedCallback(e,n,o){var f,S;switch(super.attributeChangedCallback(e,n,o),e){case c.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=o!=null?o:void 0;break;case c.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=o!=null?o:void 0;break;case"src":{let p=!!n,Ee=!!o;!p&&Ee?h(this,ie,Ie).call(this):p&&!Ee?this.unload():p&&Ee&&(this.unload(),h(this,ie,Ie).call(this));break}case"autoplay":if(o===n)break;(f=r(this,M))==null||f.setAutoplay(this.autoplay);break;case"preload":if(o===n)break;(S=r(this,M))==null||S.setPreload(o);break;case c.PLAYBACK_ID:this.src=(0,E.toMuxVideoURL)(o!=null?o:void 0,{domain:this.customDomain});break;case c.DEBUG:{let p=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=p);break}case c.METADATA_URL:o&&fetch(o).then(p=>p.json()).then(p=>this.metadata=p).catch(p=>console.error(`Unable to load or parse metadata JSON from metadata-url ${o}!`));break;default:break}}disconnectedCallback(){this.unload()}};M=new WeakMap,F=new WeakMap,ee=new WeakMap,G=new WeakMap,te=new WeakMap,se=new WeakMap,re=new WeakMap,ie=new WeakSet,Ie=async function(){r(this,F)||(await l(this,F,Promise.resolve()),l(this,F,null),this.load())};C.customElements.get("mux-video")||(C.customElements.define("mux-video",Q),C.MuxVideoElement=Q);var pt=Q;
//# sourceMappingURL=index.cjs.js.map
