var S=(t,n,e)=>{if(!n.has(t))throw TypeError("Cannot "+e)};var a=(t,n,e)=>(S(t,n,"read from private field"),e?e.call(t):n.get(t)),l=(t,n,e)=>{if(n.has(t))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(t):n.set(t,e)},d=(t,n,e,s)=>(S(t,n,"write to private field"),s?s.call(t,e):n.set(t,e),e);var m=(t,n,e)=>(S(t,n,"access private method"),e);var p=class{addEventListener(){}removeEventListener(){}dispatchEvent(n){return!0}};if(typeof DocumentFragment=="undefined"){class t extends p{}globalThis.DocumentFragment=t}var y=class extends p{},x=class extends p{},j={get(t){},define(t,n,e){},upgrade(t){},whenDefined(t){return Promise.resolve(y)}},T,I=class{constructor(n,e={}){l(this,T,void 0);d(this,T,e==null?void 0:e.detail)}get detail(){return a(this,T)}initCustomEvent(){}};T=new WeakMap;function G(t,n){return new y}var N={document:{createElement:G},DocumentFragment,customElements:j,CustomEvent:I,EventTarget:p,HTMLElement:y,HTMLVideoElement:x},B=typeof window=="undefined"||typeof globalThis.customElements=="undefined",c=B?N:globalThis,v=B?N.document:globalThis.document;import{initialize as W,teardown as $,generatePlayerInitTime as J,PlaybackTypes as k,toMuxVideoURL as Q,MediaError as he}from"@mux/playback-core";var H=()=>{try{return"0.9.0"}catch{}return"UNKNOWN"},q=H(),K=()=>q;var Y=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],w=v.createElement("template");w.innerHTML=`
<style>
  :host {
    /* display:inline (like the native el) makes it so you can't fill
      the container with the native el */
    display: inline-block;
    box-sizing: border-box;

    width: auto;
    height: auto;
  }

  audio {
    max-width: 100%;
    max-height: 100%;
    min-width: 100%;
    min-height: 100%;
  }

</style>

<audio part="audio" crossorigin></audio>
<slot></slot>
`;var _,E,M,b=class extends c.HTMLElement{constructor(){super();l(this,E);l(this,_,void 0);this.attachShadow({mode:"open"}),this.isConnected&&m(this,E,M).call(this)}static get observedAttributes(){let e=[];Object.getOwnPropertyNames(this.prototype).forEach(i=>{let o=!1;try{typeof this.prototype[i]=="function"&&(o=!0)}catch{}!o&&i!==i.toUpperCase()&&e.push(i.toLowerCase())});let s=Object.getPrototypeOf(this).observedAttributes;return s&&(e=e.concat(s)),e}attributeChangedCallback(e,s,i){m(this,E,M).call(this),this.forwardAttribute(e,s,i)}forwardAttribute(e,s,i){let o=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),f=V(o,e),u=Object.getPrototypeOf(this.constructor).toString().indexOf("function HTMLElement")===0;f&&!u?typeof this[f]=="boolean"?i===null?this[f]=!1:this[f]=!0:this[f]=i:i===null?this.nativeEl.removeAttribute(e):["id","class"].indexOf(e)===-1&&this.nativeEl.setAttribute(e,i)}connectedCallback(){m(this,E,M).call(this)}};_=new WeakMap,E=new WeakSet,M=function(){if(a(this,_))return;d(this,_,!0),this.shadowRoot.append(w.content.cloneNode(!0));let e=this.nativeEl=this.shadowRoot.querySelector("audio");Y.forEach(i=>{e.addEventListener(i,o=>{this.dispatchEvent(new CustomEvent(o.type,{detail:o.detail}))})});let s=this.shadowRoot.querySelector("slot");s.addEventListener("slotchange",()=>{s.assignedElements().forEach(i=>{!["track","source"].includes(i.localName)||e.append(i)})}),Array.from(this.attributes).forEach(i=>{this.forwardAttribute(i.name,null,i.value)}),e.defaultMuted&&(e.muted=!0)};var U=[],F=v.createElement("audio"),z=["webkitDisplayingFullscreen","webkitSupportsFullscreen"];for(let t=Object.getPrototypeOf(F);t&&t!==c.HTMLElement.prototype;t=Object.getPrototypeOf(t))Object.keys(t).forEach(n=>{z.indexOf(n)===-1&&U.push(n)});U.forEach(t=>{if(typeof F[t]=="function")b.prototype[t]=function(){return this.nativeEl[t].apply(this.nativeEl,arguments)};else{let e={get(){return this.nativeEl[t]}};t!==t.toUpperCase()&&(e.set=function(s){this.nativeEl[t]=s}),Object.defineProperty(b.prototype,t,e)}});function V(t,n){let e=null;return t.forEach(s=>{s.toLowerCase()==n.toLowerCase()&&(e=s)}),e}c.customElements.get("custom-audio")||(c.customElements.define("custom-audio",b),c.CustomAudioElement=b);var R=b;var r={ENV_KEY:"env-key",DEBUG:"debug",PLAYBACK_ID:"playback-id",METADATA_URL:"metadata-url",PREFER_PLAYBACK:"prefer-playback",BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",DISABLE_COOKIES:"disable-cookies",TYPE:"type",STREAM_TYPE:"stream-type",START_TIME:"start-time"},X=Object.values(r),Z=K(),ee="mux-audio",h,g,O,A,C,D,P=class extends R{constructor(){super();l(this,C);l(this,h,void 0);l(this,g,void 0);l(this,O,void 0);l(this,A,{});d(this,O,J())}static get observedAttributes(){var e;return[...X,...(e=R.observedAttributes)!=null?e:[]]}get playerInitTime(){return a(this,O)}get playerSoftwareName(){return ee}get playerSoftwareVersion(){return Z}get _hls(){var e;return(e=a(this,h))==null?void 0:e.engine}get mux(){return this.nativeEl.mux}get src(){return this.getAttribute("src")}set src(e){e!==this.src&&(e==null?this.removeAttribute("src"):this.setAttribute("src",e))}get preload(){let e=this.getAttribute("preload");return e===""?"auto":["none","metadata","auto"].includes(e)?e:super.preload}set preload(e){e!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(e)?this.setAttribute("preload",e):this.removeAttribute("preload"))}get debug(){return this.getAttribute(r.DEBUG)!=null}set debug(e){e!==this.debug&&(e?this.setAttribute(r.DEBUG,""):this.removeAttribute(r.DEBUG))}get disableCookies(){return this.hasAttribute(r.DISABLE_COOKIES)}set disableCookies(e){e!==this.disableCookies&&(e?this.setAttribute(r.DISABLE_COOKIES,""):this.removeAttribute(r.DISABLE_COOKIES))}get startTime(){let e=this.getAttribute(r.START_TIME);if(e==null)return;let s=+e;return Number.isNaN(s)?void 0:s}set startTime(e){e!==this.startTime&&(e==null?this.removeAttribute(r.START_TIME):this.setAttribute(r.START_TIME,`${e}`))}get playbackId(){var e;return(e=this.getAttribute(r.PLAYBACK_ID))!=null?e:void 0}set playbackId(e){e!==this.playbackId&&(e?this.setAttribute(r.PLAYBACK_ID,e):this.removeAttribute(r.PLAYBACK_ID))}get envKey(){var e;return(e=this.getAttribute(r.ENV_KEY))!=null?e:void 0}set envKey(e){e!==this.envKey&&(e?this.setAttribute(r.ENV_KEY,e):this.removeAttribute(r.ENV_KEY))}get beaconCollectionDomain(){var e;return(e=this.getAttribute(r.BEACON_COLLECTION_DOMAIN))!=null?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(r.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(r.BEACON_COLLECTION_DOMAIN))}get streamType(){var e;return(e=this.getAttribute(r.STREAM_TYPE))!=null?e:void 0}set streamType(e){e!==this.streamType&&(e?this.setAttribute(r.STREAM_TYPE,e):this.removeAttribute(r.STREAM_TYPE))}get preferPlayback(){let e=this.getAttribute(r.PREFER_PLAYBACK);if(e===k.MSE||e===k.NATIVE)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===k.MSE||e===k.NATIVE?this.setAttribute(r.PREFER_PLAYBACK,e):this.removeAttribute(r.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter(s=>s.startsWith("metadata-")&&![r.METADATA_URL].includes(s)).reduce((s,i)=>{let o=this.getAttribute(i);return o!=null&&(s[i.replace(/^metadata-/,"").replace(/-/g,"_")]=o),s},{}),...a(this,A)}}set metadata(e){d(this,A,e!=null?e:{}),this.mux&&(console.info("Some metadata values may not be overridable at this time. Make sure you set all metadata to override before setting the src."),this.mux.emit("hb",a(this,A)))}load(){d(this,h,W(this,this.nativeEl,a(this,h)))}unload(){$(this.nativeEl,a(this,h)),d(this,h,void 0)}attributeChangedCallback(e,s,i){var o,f;switch(super.attributeChangedCallback(e,s,i),e){case"src":{let u=!!s,L=!!i;!u&&L?m(this,C,D).call(this):u&&!L?this.unload():u&&L&&(this.unload(),m(this,C,D).call(this));break}case"autoplay":if(i===s)break;(o=a(this,h))==null||o.setAutoplay(this.autoplay);break;case"preload":if(i===s)break;(f=a(this,h))==null||f.setPreload(i);break;case r.PLAYBACK_ID:this.src=Q(i!=null?i:void 0);break;case r.DEBUG:{let u=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=u);break}case r.METADATA_URL:i&&fetch(i).then(u=>u.json()).then(u=>this.metadata=u).catch(u=>console.error(`Unable to load or parse metadata JSON from metadata-url ${i}!`));break;default:break}}disconnectedCallback(){this.unload()}};h=new WeakMap,g=new WeakMap,O=new WeakMap,A=new WeakMap,C=new WeakSet,D=async function(){a(this,g)||(await d(this,g,Promise.resolve()),d(this,g,null),this.load())};c.customElements.get("mux-audio")||(c.customElements.define("mux-audio",P),c.MuxAudioElement=P);var be=P;export{Y as AudioEvents,he as MediaError,be as default};
//# sourceMappingURL=index.mjs.map
