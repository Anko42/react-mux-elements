"use strict";var S=Object.defineProperty;var G=Object.getOwnPropertyDescriptor;var H=Object.getOwnPropertyNames;var q=Object.prototype.hasOwnProperty;var z=(t,s)=>{for(var e in s)S(t,e,{get:s[e],enumerable:!0})},V=(t,s,e,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let i of H(s))!q.call(t,i)&&i!==e&&S(t,i,{get:()=>s[i],enumerable:!(r=G(s,i))||r.enumerable});return t};var W=t=>V(S({},"__esModule",{value:!0}),t);var x=(t,s,e)=>{if(!s.has(t))throw TypeError("Cannot "+e)};var o=(t,s,e)=>(x(t,s,"read from private field"),e?e.call(t):s.get(t)),d=(t,s,e)=>{if(s.has(t))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(t):s.set(t,e)},c=(t,s,e,r)=>(x(t,s,"write to private field"),r?r.call(t,e):s.set(t,e),e);var b=(t,s,e)=>(x(t,s,"access private method"),e);var ne={};z(ne,{AudioEvents:()=>D,MediaError:()=>a.MediaError,default:()=>re});module.exports=W(ne);var E=class{addEventListener(){}removeEventListener(){}dispatchEvent(s){return!0}};if(typeof DocumentFragment=="undefined"){class t extends E{}globalThis.DocumentFragment=t}var T=class extends E{},I=class extends E{},$={get(t){},define(t,s,e){},upgrade(t){},whenDefined(t){return Promise.resolve(T)}},_,v=class{constructor(s,e={}){d(this,_,void 0);c(this,_,e==null?void 0:e.detail)}get detail(){return o(this,_)}initCustomEvent(){}};_=new WeakMap;function J(t,s){return new T}var K={document:{createElement:J},DocumentFragment,customElements:$,CustomEvent:v,EventTarget:E,HTMLElement:T,HTMLVideoElement:I},Y=typeof window=="undefined"||typeof globalThis.customElements=="undefined",h=Y?K:globalThis,R=Y?K.document:globalThis.document;var a=require("@mux/playback-core");var Q=()=>{try{return"0.9.0"}catch{}return"UNKNOWN"},X=Q(),w=()=>X;var D=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],U=R.createElement("template");U.innerHTML=`
<style>
  :host {
    /* display:inline (like the native el) makes it so you can't fill
      the container with the native el */
    display: inline-block;
    box-sizing: border-box;

    width: auto;
    height: auto;
  }

  audio {
    max-width: 100%;
    max-height: 100%;
    min-width: 100%;
    min-height: 100%;
  }

</style>

<audio part="audio" crossorigin></audio>
<slot></slot>
`;var P,g,k,p=class extends h.HTMLElement{constructor(){super();d(this,g);d(this,P,void 0);this.attachShadow({mode:"open"}),this.isConnected&&b(this,g,k).call(this)}static get observedAttributes(){let e=[];Object.getOwnPropertyNames(this.prototype).forEach(i=>{let u=!1;try{typeof this.prototype[i]=="function"&&(u=!0)}catch{}!u&&i!==i.toUpperCase()&&e.push(i.toLowerCase())});let r=Object.getPrototypeOf(this).observedAttributes;return r&&(e=e.concat(r)),e}attributeChangedCallback(e,r,i){b(this,g,k).call(this),this.forwardAttribute(e,r,i)}forwardAttribute(e,r,i){let u=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),m=ee(u,e),l=Object.getPrototypeOf(this.constructor).toString().indexOf("function HTMLElement")===0;m&&!l?typeof this[m]=="boolean"?i===null?this[m]=!1:this[m]=!0:this[m]=i:i===null?this.nativeEl.removeAttribute(e):["id","class"].indexOf(e)===-1&&this.nativeEl.setAttribute(e,i)}connectedCallback(){b(this,g,k).call(this)}};P=new WeakMap,g=new WeakSet,k=function(){if(o(this,P))return;c(this,P,!0),this.shadowRoot.append(U.content.cloneNode(!0));let e=this.nativeEl=this.shadowRoot.querySelector("audio");D.forEach(i=>{e.addEventListener(i,u=>{this.dispatchEvent(new CustomEvent(u.type,{detail:u.detail}))})});let r=this.shadowRoot.querySelector("slot");r.addEventListener("slotchange",()=>{r.assignedElements().forEach(i=>{!["track","source"].includes(i.localName)||e.append(i)})}),Array.from(this.attributes).forEach(i=>{this.forwardAttribute(i.name,null,i.value)}),e.defaultMuted&&(e.muted=!0)};var F=[],j=R.createElement("audio"),Z=["webkitDisplayingFullscreen","webkitSupportsFullscreen"];for(let t=Object.getPrototypeOf(j);t&&t!==h.HTMLElement.prototype;t=Object.getPrototypeOf(t))Object.keys(t).forEach(s=>{Z.indexOf(s)===-1&&F.push(s)});F.forEach(t=>{if(typeof j[t]=="function")p.prototype[t]=function(){return this.nativeEl[t].apply(this.nativeEl,arguments)};else{let e={get(){return this.nativeEl[t]}};t!==t.toUpperCase()&&(e.set=function(r){this.nativeEl[t]=r}),Object.defineProperty(p.prototype,t,e)}});function ee(t,s){let e=null;return t.forEach(r=>{r.toLowerCase()==s.toLowerCase()&&(e=r)}),e}h.customElements.get("custom-audio")||(h.customElements.define("custom-audio",p),h.CustomAudioElement=p);var N=p;var n={ENV_KEY:"env-key",DEBUG:"debug",PLAYBACK_ID:"playback-id",METADATA_URL:"metadata-url",PREFER_PLAYBACK:"prefer-playback",BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",DISABLE_COOKIES:"disable-cookies",TYPE:"type",STREAM_TYPE:"stream-type",START_TIME:"start-time"},te=Object.values(n),ie=w(),se="mux-audio",f,A,C,y,M,B,O=class extends N{constructor(){super();d(this,M);d(this,f,void 0);d(this,A,void 0);d(this,C,void 0);d(this,y,{});c(this,C,(0,a.generatePlayerInitTime)())}static get observedAttributes(){var e;return[...te,...(e=N.observedAttributes)!=null?e:[]]}get playerInitTime(){return o(this,C)}get playerSoftwareName(){return se}get playerSoftwareVersion(){return ie}get _hls(){var e;return(e=o(this,f))==null?void 0:e.engine}get mux(){return this.nativeEl.mux}get src(){return this.getAttribute("src")}set src(e){e!==this.src&&(e==null?this.removeAttribute("src"):this.setAttribute("src",e))}get preload(){let e=this.getAttribute("preload");return e===""?"auto":["none","metadata","auto"].includes(e)?e:super.preload}set preload(e){e!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(e)?this.setAttribute("preload",e):this.removeAttribute("preload"))}get debug(){return this.getAttribute(n.DEBUG)!=null}set debug(e){e!==this.debug&&(e?this.setAttribute(n.DEBUG,""):this.removeAttribute(n.DEBUG))}get disableCookies(){return this.hasAttribute(n.DISABLE_COOKIES)}set disableCookies(e){e!==this.disableCookies&&(e?this.setAttribute(n.DISABLE_COOKIES,""):this.removeAttribute(n.DISABLE_COOKIES))}get startTime(){let e=this.getAttribute(n.START_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set startTime(e){e!==this.startTime&&(e==null?this.removeAttribute(n.START_TIME):this.setAttribute(n.START_TIME,`${e}`))}get playbackId(){var e;return(e=this.getAttribute(n.PLAYBACK_ID))!=null?e:void 0}set playbackId(e){e!==this.playbackId&&(e?this.setAttribute(n.PLAYBACK_ID,e):this.removeAttribute(n.PLAYBACK_ID))}get envKey(){var e;return(e=this.getAttribute(n.ENV_KEY))!=null?e:void 0}set envKey(e){e!==this.envKey&&(e?this.setAttribute(n.ENV_KEY,e):this.removeAttribute(n.ENV_KEY))}get beaconCollectionDomain(){var e;return(e=this.getAttribute(n.BEACON_COLLECTION_DOMAIN))!=null?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(n.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(n.BEACON_COLLECTION_DOMAIN))}get streamType(){var e;return(e=this.getAttribute(n.STREAM_TYPE))!=null?e:void 0}set streamType(e){e!==this.streamType&&(e?this.setAttribute(n.STREAM_TYPE,e):this.removeAttribute(n.STREAM_TYPE))}get preferPlayback(){let e=this.getAttribute(n.PREFER_PLAYBACK);if(e===a.PlaybackTypes.MSE||e===a.PlaybackTypes.NATIVE)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===a.PlaybackTypes.MSE||e===a.PlaybackTypes.NATIVE?this.setAttribute(n.PREFER_PLAYBACK,e):this.removeAttribute(n.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter(r=>r.startsWith("metadata-")&&![n.METADATA_URL].includes(r)).reduce((r,i)=>{let u=this.getAttribute(i);return u!=null&&(r[i.replace(/^metadata-/,"").replace(/-/g,"_")]=u),r},{}),...o(this,y)}}set metadata(e){c(this,y,e!=null?e:{}),this.mux&&(console.info("Some metadata values may not be overridable at this time. Make sure you set all metadata to override before setting the src."),this.mux.emit("hb",o(this,y)))}load(){c(this,f,(0,a.initialize)(this,this.nativeEl,o(this,f)))}unload(){(0,a.teardown)(this.nativeEl,o(this,f)),c(this,f,void 0)}attributeChangedCallback(e,r,i){var u,m;switch(super.attributeChangedCallback(e,r,i),e){case"src":{let l=!!r,L=!!i;!l&&L?b(this,M,B).call(this):l&&!L?this.unload():l&&L&&(this.unload(),b(this,M,B).call(this));break}case"autoplay":if(i===r)break;(u=o(this,f))==null||u.setAutoplay(this.autoplay);break;case"preload":if(i===r)break;(m=o(this,f))==null||m.setPreload(i);break;case n.PLAYBACK_ID:this.src=(0,a.toMuxVideoURL)(i!=null?i:void 0);break;case n.DEBUG:{let l=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=l);break}case n.METADATA_URL:i&&fetch(i).then(l=>l.json()).then(l=>this.metadata=l).catch(l=>console.error(`Unable to load or parse metadata JSON from metadata-url ${i}!`));break;default:break}}disconnectedCallback(){this.unload()}};f=new WeakMap,A=new WeakMap,C=new WeakMap,y=new WeakMap,M=new WeakSet,B=async function(){o(this,A)||(await c(this,A,Promise.resolve()),c(this,A,null),this.load())};h.customElements.get("mux-audio")||(h.customElements.define("mux-audio",O),h.MuxAudioElement=O);var re=O;
//# sourceMappingURL=index.cjs.js.map
